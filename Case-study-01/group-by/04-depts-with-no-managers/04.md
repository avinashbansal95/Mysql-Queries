## Problem 4: Departments with No Managers

**Goal:**  
List all departments where **no employee in that department is a manager** (i.e., no one from that department appears as a `manager_id` for any employee).

---

### **Step 1: Understand the Requirement**

- A department has "no managers" if **none of its employees** are referenced as `manager_id` in the `employees` table.

---

### **Step 2: Approach**

- For each department, check if **none of its employees' `emp_id`** appear as a `manager_id` in the `employees` table.
- Use a `NOT EXISTS` or `LEFT JOIN ... IS NULL` pattern.

---

### **Step 3: Query**

```sql
SELECT d.dept_name
FROM departments d
LEFT JOIN employees e ON d.dept_id = e.dept_id
WHERE NOT EXISTS (
    SELECT 1
    FROM employees m
    WHERE m.manager_id = e.emp_id
)
GROUP BY d.dept_id, d.dept_name
HAVING COUNT(e.emp_id) > 0;
```

**Alternate (more robust) version:**

```sql
SELECT d.dept_name
FROM departments d
JOIN employees e ON d.dept_id = e.dept_id
WHERE e.emp_id NOT IN (
    SELECT DISTINCT manager_id FROM employees WHERE manager_id IS NOT NULL
)
GROUP BY d.dept_id, d.dept_name
HAVING COUNT(e.emp_id) = (
    SELECT COUNT(*) FROM employees ee WHERE ee.dept_id = d.dept_id
)
```

---

### **Step 4: Explanation**

- For each department, we look at all its employees.
- We check if **none of their `emp_id`** are listed as a `manager_id` in the `employees` table.
- If true for all employees in the department, that department is included in the result.

---

### **Sample Output (Based on Your Data)**

| dept_name |
|-----------|
| Finance   |
| HR        |
| Marketing |

---

**This query helps you find departments where no one is a manager.**